
## JVM 이해하기

### 프로그래밍 언어 기초
- 간단 자바 프로그램 실행 흐름
  1. 자바 코드 작성
  2. 자바 컴파일러가 자바 코드를 바이트 코드로 컴파일
  3. 컴파일 된 코드를 JVM이 실행 (class 파일을 JVM에 로드하여 실행한다.)
  4. JVM -> OS -> 하드웨어 순으로 프로그램에 필요한 여러 자원 및 연산

### static, heap, stack
- JVM이 메모리를 논리적으로 나눈다
  - **static : 프로그램 시작 동시에 할당되어 종료될 때까지 할당 되는 영역**
  - **heap : 프로그램이 실행되고 있는 도중에 할당(동적)**
  - **stack : 프로그램이 실행 되고 있는 도중에 메서드가 호출 되었을 때 도중에만 할당 되는 영역**

### 변수 및 자료형
- 변수는 메모리에 어떤 공간을 달라고 요청하는 것과 같다.
- int a = 1 -> 4Bytes 의 메모리 공간을 할당해주고 거기에 1을 넣어라.
- 변수 테이블에 변수와 메모리 주소를 기록한다.

### 자바 코드 실행 원리
1. 자바의 모든 코드는 클래스 내부에 존재해야한다.
2. 자바는 실행 전에 static 이라는 키워드를 가지고 있는 모든 것들을 static 메모리 공간에 할당한다. 
3. 자바를 실행하면 main 블록 내부에 있는 코드를 실행(stack 영역에 변수 등이 할당됨)하고 블록이 끝나면 종료된다.
4. main 메서드가 실행될 때 (stack 영역에 할당되어 코드를 실행할 때) new라는 키워드를 가진 데이터 타입을 heap 영역에 할당 시킨다.
5. 
#### JVM은 해당 클래스 파일을 읽으면서 먼저 static 키워드의 변수, 메서드, 클래스 등을 할당한다.
#### class마다 static 영역을 가지고 있다.

#### static은 정적이다. (프로그램 시작 동시에 미리 정해야한다.)
#### heap은 동적이다 (프로그램 시작 이후에 할당 된다.)
- stack은 예를 들어 
  - main 메서드가 실행 될 때 stack 영역에 main 메서드에 해당하는 stack 영역이 할당되고, 
  - 변수들이 main stack 영역에 할당된다.
  - main stack 영역에서 new 키워드를 만나게 되면 heap 영역에 해당 타입이 할당된다.
  - heap 영역을 가리키는 변수를 main stack 영역에 할당하여 new 키워드로 인해 heap 영역에 할당된 타입을
  - 변수가 가리키게 된다.

## 자바 메모리 구조
1. 프로그램이 실행 되었을 때 = Runtime
2. 컴파일 시점 
### 일반 변수와 레퍼런스 변수
- 일반 타입은 미리 크기가 정해져 있기 때문에 메모리에 할당이 바로 가능 (컴파일 시점에 안다.)
- 커스텀 타입은 타입의 크기를 Runtime 시 알 수 있기 때문에 크기가 정해져 있지 않다. (컴파일 시점에 모른다.)
- 일반 변수는 값을 가지고 있다.
- 레퍼런스 변수는 주소를 가지고 있어서 heap 메모리에 참조할 수 있다.

### 메서드
- 클래스의 행위

### 메서드 Stack 메모리1
- .java -> compile -> .class -> 실행 -> JVM
  1. .class 로드
  2. static 찾기
  3. main 메서드 실행

- main 메서드 실행 (static에 떠있기 때문에)
- Hello 라는 class 영역에 static 공간이 생기며 main을 찾는다..
- Hello는 main을 실행한다. -> static 영역에 main method가 있기 때문에
  - 실행할 수 있다는 근거는 static에 떠있기 때문이다.
- Hello라는 애가 main의 큐를 만들고 main에 적혀 있는 코드를 하나씩 넣는다.
- 코드를 넣고, main이라는 큐가 열린다. (오픈된다) -> main method가 실행될때
  - 오픈 될 때 일어나는 일이 한가지 더 있는데, stack이라는 메모리 공간이 생긴다.
  - 그리고 stack이라는 메모리 공간에 main method가 쌓인다.
- 각 라인을 실행하고 프로그램이 종료된다.

### 메서드 Stack 메모리2
1. .java 코드
2. .java compile -> .class (JVM이 해석할 수 있도록)
3. 해당 클래스 영역이 생긴다.
4. 클래스 영역의 static 영역에 main() 이 올라간다.
5. main()이 실행된다.
6. main 코드 영역 오픈 -> Queue가 만들어졌다는 것
7. main 메서드의 코드 중 a() 호출. -> Stack이 만들어졌다는 것
   1. Stack에 main 메서드 들어감. (저장영역) -> 비어있음
   2. a() 코드 영역 오픈 -> Queue가 만들어짐.
      1. b() 호출 -> Stack이 만들어짐.
      2. b() 코드영역 오픈 -> Queue가 만들어짐.
        - 코드 실행
        - b() stack pop
   3. a() 로 돌아감. (b() return)
      - 코드 실행
      - a() stack pop
8. main()으로 돌아감 (a() return)
9. main 코드 실행 
10. main() stack pop -> java program exit


### 지역 변수와 전역 변수
#### 지역변수 : stack에 저장. lifecycle 짧다
#### 전역변수 : heap, static에 저장. lifecycle 길다.

#### Stack
- 지역 변수 = 메서드가 실행될 때 메모리에 할당 됨 -> 메서드가 종료될 때 메모리에서 사라진다.
#### Heap
- 전역 변수 = new 키워드로 인해 메모리에 할당 됨 -> 더 이상 참조하지 않을 때 메모리에서 사라진다.
#### Static
- 전역 변수 = main 메서드가 실행 되기 전에 메모리에 할당된다 -> main 메서드가 종료될 때 메모리에서 사라진다.
- static 은 자바 프로그램이 실행 될 때 할당 되어야함.!

메서드 : 블랙박스다. -> 뭘 좀 달라고 하면 줌.

문제 ! 오류의 원인을 서술하라.
```java
class A {
  int num = 10;
  
  static void start() {
    System.out.println(num); 
    // 여긴 static 영역에 올라가는 메서드이므로, num은 new 키워드를 통해서 heap 영역에 할당되지 않는 이상 사용할 수 없다.
    // heap 영역은 main method가 static 영역에 올라가고, main queue에서 코드를 실행하지 않으면 할당 될 수 없다.
    // 여기서 static 영역은, 자바 프로그램이 실행 되기 이 전에 이미 할당되어야 하므로
    // start()를 호출 했을 때, 코드 영역에서 num 이 무엇인지 모른다.
  } 
}
```
#### this
- this는 heap 공간에 할당된 자기 자신을 가리킨다.

## 객체지향 프로그래밍 이해
### 클래스와 오브젝트와 인스턴스.

구체적인 것 (셀 수 있는 것) : 물질 명사 (탁자, 침대 등)
추상적인 것 (셀 수 없는 것) : 추상 명사 (가구)

클래스 : 설계도

오브젝트 : new 가능한 것
인스턴스 : new 된 것

### 클래스의 상태와 행위

1. 클래스의 필드는 메서드에 의해서 변한다.
2. 외부에서 (사용자 측면) 필드를 노출 시킨다는 건, 어떤 행위 없이 필드를 변경 가능하다는 얘기다
3. 외부에서 필드 변경을 한다면, 그만한 이유가 있어야함.

### 상속 (extends)
1. 상속 -> 추상화 : 상태, 행위를 물려 받을 수 있다.

### 오버라이딩
- 상속 할 때 부모 클래스의 이름과 같다면 재정의 (무효화) 하여 구현하는것

### 추상 클래스
- 가구인 의자, 침대는 인스턴스화 할 수 있지만, 가구는 인스턴스화 불가

### 인터 페이스
- 약속 (만드는 사람 입장에서 일방적인)

### 자바에서의 인터페이스
- 행위에 대한 제약

### SRP, DIP
- SRP(Single Response Principle) : 단일 책임 원칙
    - 행위는 한가지일만 하자.
- DIP(Dependency Inversion principle) : 의존성 역전 원칙
  - 되도록 추상화된 인터페이스를 제공받자.
### 다운 캐스팅
- 같은 heap에 할당된 인스턴스만 캐스팅 가능하다.
### 스레드
- 하나의 CPU가 두가지 일을 동시에 하는 것 (멀티 스레드)
- 자바 : 메인 스레드
- 컨텍스트 스위칭 비용이 발생한다.
1. 눈속임
- 빠른속도!
- 총합시간은 느림
2. CPU가 효율적이게 일하게함

### 동기와 비동기
1. 동기 : 일의 순서가 있다
2. 비동기 : 일의 순서가 없다

### String Constant pool
- 문자 상수 풀이라 한다.
- heap에 할당시키지 않고 바로 ""로 할당하고, 같은 문자열이라면 같은 주소를 가리키게 한다.
- hashcode()k